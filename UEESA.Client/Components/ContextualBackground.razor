@if (PageState.CurrentPageContext.PageBackgroundFileName != null)
{
    @if (PageState.CurrentPageContext.PageBackgroundFileName.EndsWith(".avif"))
    {
        <img id="background" src="@("/img/backgrounds/" + PageState.CurrentPageContext.PageBackgroundFileName)" />
    }
    else if (PageState.CurrentPageContext.PageBackgroundFileName.EndsWith(".webm"))
    {
        <video id="background" src="@("/vid/backgrounds/" + PageState.CurrentPageContext.PageBackgroundFileName)" autoplay muted loop poster="@("/vid/backgrounds/" + PageState.CurrentPageContext.PageBackgroundFileName.Replace(".webm", ".avif"))" />
    }
}

@inject UIState.PageState PageState

@code {

    protected override async Task OnInitializedAsync()
    {
        PageState.OnPageTransitionBackgroundStage += StateHasChanged;
        await base.OnInitializedAsync();
    }
}
